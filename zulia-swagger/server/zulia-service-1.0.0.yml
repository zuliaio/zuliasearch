openapi: 3.0.1
info:
  title: zulia-service
  version: 1.0.0
paths:
  /associated/{indexName}/all:
    get:
      tags:
      - Associated
      summary: List all associated documents
      description: "Returns metadata for all associated documents in the index, optionally\
        \ filtered by a query"
      operationId: getAllAssociatedForIndex
      parameters:
      - name: indexName
        in: path
        required: true
        schema:
          type: string
      - name: q
        in: query
        explode: false
        schema:
          type: string
          nullable: true
      responses:
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getAllAssociatedForIndex 200 response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/AssociatedMetadataDTO"
  /associated/{indexName}/{uniqueId}/bundle:
    get:
      tags:
      - Associated
      summary: Download associated files bundle
      description: "Downloads all associated files for a document as a ZIP archive,\
        \ including metadata"
      operationId: getAssociatedBundleForId
      parameters:
      - name: uniqueId
        in: path
        required: true
        schema:
          type: string
      - name: indexName
        in: path
        required: true
        schema:
          type: string
      responses:
        "400":
          description: Bad Request
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getAssociatedBundleForId 200 response
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
  /associated/{indexName}/{uniqueId}/filenames:
    get:
      tags:
      - Associated
      summary: List associated filenames
      description: Returns the list of associated filenames for a given document
      operationId: getAssociatedFileNamesForId
      parameters:
      - name: uniqueId
        in: path
        required: true
        schema:
          type: string
      - name: indexName
        in: path
        required: true
        schema:
          type: string
      responses:
        "400":
          description: Bad Request
          content:
            text/json:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            text/json:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            text/json:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            text/json:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getAssociatedFileNamesForId 200 response
          content:
            text/json:
              schema:
                $ref: "#/components/schemas/AssociatedController.Filenames"
  /associated/{indexName}/{uniqueId}/{fileName}:
    post:
      tags:
      - Associated
      summary: Store an associated file
      description: "Uploads a file and associates it with a document, optionally including\
        \ metadata JSON"
      operationId: storeAssociated
      parameters:
      - name: uniqueId
        in: path
        required: true
        schema:
          type: string
      - name: fileName
        in: path
        required: true
        schema:
          type: string
      - name: indexName
        in: path
        required: true
        schema:
          type: string
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                metaJson:
                  type: string
                  nullable: true
            encoding:
              file:
                contentType: application/octet-stream
                explode: false
        required: true
      responses:
        "400":
          description: Bad Request
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            text/plain:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: storeAssociated 200 response
          content:
            text/plain:
              schema:
                type: object
  /associated/{indexName}/{uniqueId}/{fileName}/file:
    get:
      tags:
      - Associated
      summary: Download associated file
      description: Downloads the associated file content as a binary stream
      operationId: getAssociatedFile
      parameters:
      - name: indexName
        in: path
        required: true
        schema:
          type: string
      - name: uniqueId
        in: path
        required: true
        schema:
          type: string
      - name: fileName
        in: path
        required: true
        schema:
          type: string
      responses:
        "400":
          description: Bad Request
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/octet-stream:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getAssociatedFile 200 response
          content:
            application/octet-stream:
              schema:
                type: string
                format: binary
  /associated/{indexName}/{uniqueId}/{fileName}/metadata:
    get:
      tags:
      - Associated
      summary: Get associated document metadata
      description: Returns the metadata JSON for a specific associated file
      operationId: getAssociatedMetadata
      parameters:
      - name: indexName
        in: path
        required: true
        schema:
          type: string
      - name: uniqueId
        in: path
        required: true
        schema:
          type: string
      - name: fileName
        in: path
        required: true
        schema:
          type: string
      responses:
        "400":
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getAssociatedMetadata 200 response
          content:
            application/json:
              schema:
                type: string
  /fetch:
    get:
      tags:
      - Fetch
      summary: Fetch a document by ID
      description: Retrieves a stored document by its unique ID from the specified
        index
      operationId: fetch
      parameters:
      - name: id
        in: query
        description: Unique document ID
        required: true
        explode: false
        schema:
          type: string
      - name: index
        in: query
        description: Index name
        required: true
        explode: false
        schema:
          type: string
      - name: realtime
        in: query
        description: "If true, force a commit before fetching to ensure latest changes\
          \ are visible"
        explode: false
        schema:
          type: boolean
          nullable: true
      responses:
        "400":
          description: Bad Request
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: fetch 200 response
          content:
            application/json;charset=utf-8:
              schema:
                type: string
  /fetch/{indexName}/{uniqueId}:
    get:
      tags:
      - Fetch
      summary: Fetch a document by path
      description: Retrieves a stored document using path parameters instead of query
        parameters
      operationId: fetchPath
      parameters:
      - name: uniqueId
        in: path
        description: Unique document ID
        required: true
        schema:
          type: string
      - name: indexName
        in: path
        description: Index name
        required: true
        schema:
          type: string
      - name: realtime
        in: query
        description: "If true, force a commit before fetching to ensure latest changes\
          \ are visible"
        explode: false
        schema:
          type: boolean
          nullable: true
      responses:
        "400":
          description: Bad Request
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: fetchPath 200 response
          content:
            application/json;charset=utf-8:
              schema:
                type: string
  /fields:
    get:
      tags:
      - Fields
      summary: Get field names (legacy)
      description: "Returns field names using query parameter. Prefer /fields/{indexName}\
        \ instead."
      operationId: getFieldsLegacy
      parameters:
      - name: index
        in: query
        description: Index name
        required: true
        explode: false
        schema:
          type: string
      - name: realtime
        in: query
        description: "If true, force a commit before reading to ensure latest fields\
          \ are visible"
        explode: false
        schema:
          type: boolean
          nullable: true
      responses:
        "400":
          description: Bad Request
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getFieldsLegacy 200 response
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/FieldsDTO"
      deprecated: true
  /fields/{indexName}:
    get:
      tags:
      - Fields
      summary: Get field names
      description: Returns all field names that exist in the specified index
      operationId: getFields
      parameters:
      - name: indexName
        in: path
        description: Index name
        required: true
        schema:
          type: string
      - name: realtime
        in: query
        description: "If true, force a commit before reading to ensure latest fields\
          \ are visible"
        explode: false
        schema:
          type: boolean
          nullable: true
      responses:
        "400":
          description: Bad Request
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getFields 200 response
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/FieldsDTO"
  /index:
    get:
      tags:
      - Indexes
      summary: Get index settings (legacy)
      description: "Returns index settings using query parameter. Prefer /indexes/{index}\
        \ instead."
      operationId: getIndexLegacy
      parameters:
      - name: index
        in: query
        required: true
        explode: false
        schema:
          type: string
      responses:
        "400":
          description: Bad Request
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getIndexLegacy 200 response
          content:
            application/json;charset=utf-8:
              schema:
                type: string
      deprecated: true
  /indexes:
    get:
      tags:
      - Indexes
      summary: List all indexes
      description: Returns a sorted list of all index names in the cluster
      operationId: getIndexes
      responses:
        "400":
          description: Bad Request
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getIndexes 200 response
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/IndexesResponseDTO"
  /indexes/{index}:
    get:
      tags:
      - Indexes
      summary: Get index settings
      description: Returns the full configuration and settings for the specified index
      operationId: getIndex
      parameters:
      - name: index
        in: path
        required: true
        schema:
          type: string
      responses:
        "400":
          description: Bad Request
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getIndex 200 response
          content:
            application/json;charset=utf-8:
              schema:
                type: string
  /nodes:
    get:
      tags:
      - Nodes
      summary: Get cluster nodes
      description: Returns information about cluster nodes including their index shard
        mappings
      operationId: getNodes
      parameters:
      - name: active
        in: query
        description: "If true, return only active nodes"
        required: true
        explode: false
        schema:
          type: boolean
          default: false
      responses:
        "400":
          description: Bad Request
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "404":
          description: Not Found
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getNodes 200 response
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/NodesResponseDTO"
  /query:
    get:
      tags:
      - Query
      summary: Search documents
      description: "Executes a query against one or more indexes and returns matching\
        \ documents with optional facets, highlights, and analysis"
      operationId: get
      parameters:
      - name: index
        in: query
        description: Index name(s) to search
        required: true
        explode: false
        schema:
          type: array
          items:
            type: string
      - name: q
        in: query
        description: Query string in Lucene syntax
        required: true
        explode: false
        schema:
          type: string
          default: '*:*'
      - name: qf
        in: query
        description: Query fields to search against
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: fq
        in: query
        description: Filter queries (non-scoring)
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: qJson
        in: query
        description: Query as JSON (protobuf Query message format)
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: fl
        in: query
        description: Fields to return in results. Prefix with - to exclude a field.
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: fetch
        in: query
        description: Whether to fetch full documents
        required: true
        explode: false
        schema:
          type: boolean
          default: true
      - name: rows
        in: query
        description: Number of results to return
        required: true
        explode: false
        schema:
          type: integer
          format: int32
          default: 0
      - name: facet
        in: query
        description: Facet fields to compute counts for (field or field:maxCount (-1
          for no limit))
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: drillDown
        in: query
        description: Drill-down facet filters (field:value)
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: defaultOp
        in: query
        description: Default boolean operator (AND or OR)
        explode: false
        schema:
          type: string
          nullable: true
      - name: sort
        in: query
        description: Sort fields (field or field:ASC/DESC)
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: mm
        in: query
        description: Minimum number of optional clauses that must match
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      - name: sim
        in: query
        description: Field similarity override (field:bm25|constant|tf|tfidf)
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: debug
        in: query
        description: Enable debug mode to return query explanation
        required: true
        explode: false
        schema:
          type: boolean
          default: false
      - name: dontCache
        in: query
        description: "If true, bypass query caching"
        required: true
        explode: false
        schema:
          type: boolean
          default: true
      - name: start
        in: query
        description: Starting offset for pagination
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      - name: hl
        in: query
        description: Fields to highlight
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: hlJson
        in: query
        description: Highlight configuration as JSON (protobuf HighlightRequest format)
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: alJson
        in: query
        description: Analysis configuration as JSON (protobuf AnalysisRequest format)
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: cursor
        in: query
        description: "Cursor for deep pagination. Use '0' to start, then pass the\
          \ returned cursor value."
        explode: false
        schema:
          type: string
          nullable: true
      - name: truncate
        in: query
        description: Truncate long field values in response
        required: true
        explode: false
        schema:
          type: boolean
          default: false
      - name: realtime
        in: query
        description: "If true, force a commit before searching to ensure all recent\
          \ changes are visible"
        explode: false
        schema:
          type: boolean
          nullable: true
      - name: concurrency
        in: query
        description: Number of concurrent shard queries
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      responses:
        "400":
          description: Bad Request
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: get 200 response
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/SearchResultsDTO"
  /query/csv:
    get:
      tags:
      - Query
      summary: Export search results as CSV
      description: Executes a query and returns results as a CSV download. Supports
        batch mode for large exports using cursor-based pagination.  Fields are required.
      operationId: getCSV
      parameters:
      - name: index
        in: query
        required: true
        explode: false
        schema:
          type: array
          items:
            type: string
      - name: q
        in: query
        required: true
        explode: false
        schema:
          type: string
          default: '*:*'
      - name: qf
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: fq
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: qJson
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: fl
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: fetch
        in: query
        required: true
        explode: false
        schema:
          type: boolean
          default: true
      - name: rows
        in: query
        required: true
        explode: false
        schema:
          type: integer
          format: int32
          default: 0
      - name: facet
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: drillDown
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: defaultOp
        in: query
        explode: false
        schema:
          type: string
          nullable: true
      - name: sort
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: mm
        in: query
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      - name: sim
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: debug
        in: query
        required: true
        explode: false
        schema:
          type: boolean
          default: false
      - name: dontCache
        in: query
        required: true
        explode: false
        schema:
          type: boolean
          default: true
      - name: start
        in: query
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      - name: hl
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: hlJson
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: alJson
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: batch
        in: query
        required: true
        explode: false
        schema:
          type: boolean
          default: false
      - name: batchSize
        in: query
        required: true
        explode: false
        schema:
          type: integer
          format: int32
          default: 500
      - name: cursor
        in: query
        explode: false
        schema:
          type: string
          nullable: true
      - name: realtime
        in: query
        explode: false
        schema:
          type: boolean
          nullable: true
      - name: concurrency
        in: query
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      responses:
        "400":
          description: Bad Request
          content:
            text/csv;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            text/csv;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            text/csv;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getCSV 200 response
          content:
            text/csv;charset=utf-8:
              schema:
                type: object
  /query/facet:
    get:
      tags:
      - Query
      summary: Export facet counts as CSV
      description: "Executes a query and returns facet counts as CSV with columns:\
        \ facetName, facetKey, facetValue"
      operationId: getFacets
      parameters:
      - name: index
        in: query
        required: true
        explode: false
        schema:
          type: array
          items:
            type: string
      - name: q
        in: query
        required: true
        explode: false
        schema:
          type: string
          default: '*:*'
      - name: qf
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: fq
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: qJson
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: fl
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: facet
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: drillDown
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: defaultOp
        in: query
        explode: false
        schema:
          type: string
          nullable: true
      - name: sort
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: mm
        in: query
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      - name: debug
        in: query
        required: true
        explode: false
        schema:
          type: boolean
          default: false
      - name: start
        in: query
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      - name: cursor
        in: query
        explode: false
        schema:
          type: string
          nullable: true
      - name: realtime
        in: query
        explode: false
        schema:
          type: boolean
          nullable: true
      - name: concurrency
        in: query
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      responses:
        "400":
          description: Bad Request
          content:
            text/csv;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            text/csv;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            text/csv;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getFacets 200 response
          content:
            text/csv;charset=utf-8:
              schema:
                type: object
  /stats:
    get:
      tags:
      - Stats
      summary: Get node statistics
      description: "Returns JVM memory usage, disk space, Zulia version, and per-index\
        \ statistics for the current node"
      operationId: getStats
      responses:
        "500":
          description: Internal Server Error
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getStats 200 response
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/ZuliaBase.NodeStats"
  /terms:
    get:
      tags:
      - Terms
      summary: Get terms as JSON
      description: Returns terms and their frequencies for a given field in the index
      operationId: getTermsJson
      parameters:
      - name: index
        in: query
        description: Index name
        required: true
        explode: false
        schema:
          type: string
      - name: fl
        in: query
        description: Field name to get terms for
        required: true
        explode: false
        schema:
          type: string
      - name: amount
        in: query
        description: Maximum number of terms to return
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      - name: minDocFreq
        in: query
        description: Minimum document frequency for a term to be included
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      - name: minTermFreq
        in: query
        description: Minimum term frequency for a term to be included
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      - name: startTerm
        in: query
        description: Only return terms lexicographically >= this value
        explode: false
        schema:
          type: string
          nullable: true
      - name: endTerm
        in: query
        description: Only return terms lexicographically <= this value
        explode: false
        schema:
          type: string
          nullable: true
      - name: termFilter
        in: query
        description: Regex filter to apply to terms
        explode: false
        schema:
          type: string
          nullable: true
      - name: termMatch
        in: query
        description: Term match pattern
        explode: false
        schema:
          type: string
          nullable: true
      - name: includeTerm
        in: query
        description: Specific terms to include in the response
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: fuzzyTermJson
        in: query
        description: Fuzzy term configuration as JSON (protobuf FuzzyTerm format)
        explode: false
        schema:
          type: string
          nullable: true
      - name: realtime
        in: query
        description: "If true, force a commit before reading to ensure latest terms\
          \ are visible"
        explode: false
        schema:
          type: boolean
          nullable: true
      responses:
        "400":
          description: Bad Request
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getTermsJson 200 response
          content:
            application/json;charset=utf-8:
              schema:
                $ref: "#/components/schemas/TermsResponseDTO"
  /terms/csv:
    get:
      tags:
      - Terms
      summary: Get terms as CSV
      description: "Returns terms and their frequencies for a given field as CSV with\
        \ columns: term, termFreq, docFreq, score"
      operationId: getTermsCsv
      parameters:
      - name: index
        in: query
        required: true
        explode: false
        schema:
          type: string
      - name: fl
        in: query
        required: true
        explode: false
        schema:
          type: string
      - name: amount
        in: query
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      - name: minDocFreq
        in: query
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      - name: minTermFreq
        in: query
        explode: false
        schema:
          type: integer
          format: int32
          nullable: true
      - name: startTerm
        in: query
        explode: false
        schema:
          type: string
          nullable: true
      - name: endTerm
        in: query
        explode: false
        schema:
          type: string
          nullable: true
      - name: termFilter
        in: query
        explode: false
        schema:
          type: string
          nullable: true
      - name: termMatch
        in: query
        explode: false
        schema:
          type: string
          nullable: true
      - name: includeTerm
        in: query
        explode: false
        schema:
          type: array
          nullable: true
          items:
            type: string
      - name: fuzzyTermJson
        in: query
        explode: false
        schema:
          type: string
          nullable: true
      - name: realtime
        in: query
        explode: false
        schema:
          type: boolean
          nullable: true
      responses:
        "400":
          description: Bad Request
          content:
            text/csv;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "500":
          description: Internal Server Error
          content:
            text/csv;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "503":
          description: Service Unavailable
          content:
            text/csv;charset=utf-8:
              schema:
                $ref: "#/components/schemas/JsonError"
        "200":
          description: getTermsCsv 200 response
          content:
            text/csv;charset=utf-8:
              schema:
                type: string
components:
  schemas:
    AbstractResource_JsonError_:
      type: object
      properties:
        _links:
          type: object
          additionalProperties:
            type: object
        _embedded:
          type: object
          additionalProperties:
            type: array
            items:
              $ref: "#/components/schemas/Resource"
    AnalysisDTO:
      required:
      - field
      - terms
      type: object
      properties:
        field:
          type: string
        terms:
          type: array
          items:
            $ref: "#/components/schemas/TermDTO"
    AnalysisResultDTO:
      required:
      - analysisRequest
      - terms
      - tokens
      type: object
      properties:
        analysisRequest:
          type: object
          additionalProperties:
            type: object
        tokens:
          type: array
          items:
            type: string
        terms:
          type: array
          items:
            $ref: "#/components/schemas/TermDTO"
    AssociatedController.Filenames:
      required:
      - filenames
      type: object
      properties:
        filenames:
          type: array
          items:
            type: string
    AssociatedMetadataDTO:
      required:
      - filename
      - meta
      - uniqueId
      - uploadDate
      type: object
      properties:
        uniqueId:
          type: string
        filename:
          type: string
        uploadDate:
          type: string
          format: date-time
        meta:
          type: object
          additionalProperties:
            type: object
    FacetDTO:
      required:
      - count
      - facet
      - maxError
      type: object
      properties:
        facet:
          type: string
        count:
          type: integer
          format: int64
        maxError:
          type: integer
          format: int64
    FacetsDTO:
      required:
      - field
      - maxPossibleMissing
      - values
      type: object
      properties:
        field:
          type: string
        maxPossibleMissing:
          type: integer
          format: int64
        values:
          type: array
          items:
            $ref: "#/components/schemas/FacetDTO"
    FieldsDTO:
      type: object
      properties:
        index:
          type: string
        fields:
          type: array
          items:
            type: string
    HighlightDTO:
      required:
      - field
      - fragments
      type: object
      properties:
        field:
          type: string
        fragments:
          type: array
          items:
            type: string
    IndexMappingDTO:
      type: object
      properties:
        name:
          type: string
        indexWeight:
          type: integer
          format: int32
        primary:
          type: array
          items:
            type: integer
            format: int32
        replica:
          type: array
          items:
            type: integer
            format: int32
    IndexesResponseDTO:
      type: object
      properties:
        indexes:
          type: array
          items:
            type: string
    JsonError:
      required:
      - message
      type: object
      allOf:
      - $ref: "#/components/schemas/AbstractResource_JsonError_"
      - type: object
        properties:
          _links:
            type: object
            additionalProperties:
              type: object
          _embedded:
            type: object
            additionalProperties:
              type: array
              items:
                $ref: "#/components/schemas/Resource"
          message:
            type: string
          logref:
            type: string
            nullable: true
          path:
            type: string
            nullable: true
    NodeDTO:
      type: object
      properties:
        serverAddress:
          type: string
        servicePort:
          type: integer
          format: int32
        restPort:
          type: integer
          format: int32
        heartbeat:
          type: integer
          format: int64
        indexMappings:
          type: array
          items:
            $ref: "#/components/schemas/IndexMappingDTO"
    NodesResponseDTO:
      type: object
      properties:
        members:
          type: array
          items:
            $ref: "#/components/schemas/NodeDTO"
    OptionalMultiValues_Link_:
      $ref: "#/components/schemas/OptionalValues_List_Link__"
    OptionalMultiValues_Resource_:
      $ref: "#/components/schemas/OptionalValues_List_Resource__"
    OptionalValues_List_Link__:
      type: object
      properties:
        empty:
          type: boolean
    OptionalValues_List_Resource__:
      type: object
      properties:
        empty:
          type: boolean
    Resource:
      type: object
      properties:
        _links:
          $ref: "#/components/schemas/OptionalMultiValues_Link_"
        _embedded:
          $ref: "#/components/schemas/OptionalMultiValues_Resource_"
    ScoredResultDTO:
      type: object
      properties:
        id:
          type: string
        score:
          type: number
          format: float
        indexName:
          type: string
        document:
          type: object
          additionalProperties:
            type: object
        highlights:
          type: array
          items:
            $ref: "#/components/schemas/HighlightDTO"
        analysis:
          type: array
          items:
            $ref: "#/components/schemas/AnalysisResultDTO"
        shard:
          type: integer
          format: int32
    SearchResultsDTO:
      type: object
      properties:
        totalHits:
          type: integer
          format: int64
        cursor:
          type: string
        analysis:
          type: array
          items:
            $ref: "#/components/schemas/AnalysisDTO"
        results:
          type: array
          items:
            $ref: "#/components/schemas/ScoredResultDTO"
        facets:
          type: array
          items:
            $ref: "#/components/schemas/FacetsDTO"
    TermDTO:
      required:
      - docFreq
      - score
      - term
      - termFreq
      type: object
      properties:
        term:
          type: string
        docFreq:
          type: integer
          format: int64
        termFreq:
          type: integer
          format: int64
        score:
          type: number
          format: double
    TermsResponseDTO:
      type: object
      properties:
        index:
          type: string
        field:
          type: string
        terms:
          type: array
          items:
            $ref: "#/components/schemas/TermDTO"
    ZuliaBase.CacheStats:
      type: object
      properties:
        estimatedSize:
          type: integer
          format: int64
        hitCount:
          type: integer
          format: int64
        missCount:
          type: integer
          format: int64
        totalLoadTime:
          type: integer
          format: int64
        evictionCount:
          type: integer
          format: int64
        resultSize:
          type: integer
          format: int64
    ZuliaBase.IndexStats:
      type: object
      properties:
        indexName:
          type: string
        shardCacheStat:
          type: array
          items:
            $ref: "#/components/schemas/ZuliaBase.ShardCacheStats"
    ZuliaBase.NodeStats:
      type: object
      properties:
        jvmUsedMemoryMB:
          type: integer
          format: int64
        jvmFreeMemoryMB:
          type: integer
          format: int64
        jvmTotalMemoryMB:
          type: integer
          format: int64
        jvmMaxMemoryMB:
          type: integer
          format: int64
        freeDataDirSpaceGB:
          type: number
          format: double
        totalDataDirSpaceGB:
          type: number
          format: double
        usedDataDirSpaceGB:
          type: number
          format: double
        zuliaVersion:
          type: string
        indexStat:
          type: array
          items:
            $ref: "#/components/schemas/ZuliaBase.IndexStats"
    ZuliaBase.ShardCacheStats:
      type: object
      properties:
        primary:
          type: boolean
        pinnedCache:
          $ref: "#/components/schemas/ZuliaBase.CacheStats"
        generalCache:
          $ref: "#/components/schemas/ZuliaBase.CacheStats"
